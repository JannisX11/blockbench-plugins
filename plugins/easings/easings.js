"use strict";(()=>{var u={name:"easings",private:!0,version:"1.0.0",module:"src/index.ts",type:"module",author:{name:"Svdex",url:"http://svdex.moe"},scripts:{watch:"esbuild src/index.ts --bundle --watch --minify --outfile=../../plugins/easings/easings.js --format=iife",build:"esbuild src/index.ts --bundle --minify --outfile=../../plugins/easings/easings.js --format=iife"},devDependencies:{esbuild:"^0.25.6",eslint:"^9.37.0",prettier:"^3.6.2","prettier-plugin-multiline-arrays":"^4.0.3","prettier-plugin-organize-imports":"^4.1.0","typescript-eslint":"^8.36.0"}};function k(i){let n=0;for(let t=0;t<i.length;t++)n=n*31+i.charCodeAt(t)|0;return n^3405695742}var f="abcdefghijklmnopqrstuvwxyz";function y(i){let n=k(i),t="",o=Math.abs(n);do t=f[o%f.length]+t,o=Math.floor(o/f.length);while(o>0);return"v.__e"+t}var A={inSine:"1 - Math.cos((_t * 90)",outSine:"Math.sin((_t * 90))",inOutSine:"0.5 * (1 - Math.cos(90 * _t))",inQuad:"_t * _t",outQuad:"1 - (1 - _t) * (1 - _t)",inOutQuad:"_t < 0.5 ? 2 * _t * _t : 1 - Math.pow(-2 * _t + 2, 2) / 2",inCubic:"_t * _t * _t",outCubic:"1 - Math.pow(1 - _t, 3)",inOutCubic:"_t < 0.5 ? 4 * _t * _t * _t : 1 - Math.pow(-2 * _t + 2, 3) / 2",inQuart:"_t * _t * _t * _t",outQuart:"1 - Math.pow(1 - _t, 4)",inOutQuart:"_t < 0.5 ? 8 * _t * _t * _t * _t : 1 - Math.pow(-2 * _t + 2, 4) / 2",inQuint:"_t * _t * _t * _t * _t",outQuint:"1 - Math.pow(1 - _t, 5)",inOutQuint:"_t < 0.5 ? 16 * _t * _t * _t * _t * _t : 1 - Math.pow(-2 * _t + 2, 5) / 2",inExpo:"_t === 0 ? 0 : Math.pow(2, 10 * _t - 10)",outExpo:"_t === 1 ? 1 : 1 - Math.pow(2, -10 * _t)",inOutExpo:"_t === 0 ? 0 : _t === 1 ? 1 : _t < 0.5 ? Math.pow(2, 20 * _t - 10) / 2 : (2 - Math.pow(2, -20 * _t + 10)) / 2",inCirc:"1 - Math.sqrt(1 - Math.pow(_t, 2))",outCirc:"Math.sqrt(1 - Math.pow(_t - 1, 2))",inOutCirc:"_t < 0.5 ? (1 - Math.sqrt(1 - Math.pow(2 * _t, 2))) / 2 : (Math.sqrt(1 - Math.pow(-2 * _t + 2, 2)) + 1) / 2",inBounce:"1 - outBounce(1 - _t)",outBounce:"_t < 1 / 2.75 ? 7.5625 * Math.pow(_t, 2) : (_t < 2 / 2.75 ? 7.5625 * Math.pow(_t - 1.5 / 2.75, 2) + 0.75 : (_t < 2.5 / 2.75 ? 7.5625 * Math.pow(_t - 2.25 / 2.75, 2) + 0.9375 : 7.5625 * Math.pow(_t - 2.625 / 2.75, 2) + 0.984375))",inOutBounce:"_t < 0.5 ? (1 - outBounce(1 - 2 * _t)) / 2 : (1 + outBounce(2 * _t - 1)) / 2"},m=Object.keys(A);function x(i){let{easing:n,duration:t,animationName:o,loop:r=!1}=i,a=y(o),c=y(o+"_orig"),e=A[n].replace(/_t/g,a).replace(/\s+/g,"");for(;e.includes("outBounce");)e=e.replace(/outBounce\(([^)]+)\)/g,(l,p)=>`(${A.outBounce.replace(/_t/g,p).replace(/\s+/g,"")})`);let s="";return r&&(s=`${c}>=${t}?{${c}=${c}-${t};};`),`q.anim_time==0?{${c}=0;};${c}=(${c}??0)+q.delta_time;${a}=${c}/${t};${s};return(${e})*${t};`}var _=`'${u.name}=${u.version}';`;function E(i,n){let t=i.name,o=m.indexOf(n),r=_+`'i=${o}';`+x({animationName:t,duration:i.length,easing:n,loop:i.loop==="loop"});i.anim_time_update=r}function g(i){let n=i.anim_time_update;if(!n.startsWith(_))return;let o=n.slice(_.length).match(/'i=(\d+)'/)?.[1];if(!o)return;let r=+o,a=m[r];if(a)return{easing:a,index:r}}function h(i){let n=i.anim_time_update;return n.startsWith(_)||!n&&i.length>0}var M={on:"far.fa-dot-circle",off:"far.fa-circle"},b=class{id=u.name;title="Easings";author=u.author.name;version=u.version;description="Apply easing functions to Minecraft: Bedrock Edition animations.";icon="stacked_line_chart";variant="both";tags=["Minecraft: Bedrock Edition","Animation"];website=u.author.url;min_version="4.8.0";actions=[];formats=new Set(["bedrock","bedrock_old"]);constructor(){this.onload=this.onload.bind(this),this.onunload=this.onunload.bind(this)}onload(){this.actionApplyEasing(),this.actionApplyEasings()}onunload(){for(let n of this.actions)n.delete();this.actions=[]}getSelectedAnimation(){if(Animator.open&&Blockbench.Animation&&Animation.selected!==null)return Animation.selected}actionApplyEasing(){let n=new Action("easings.apply_easing",{icon:this.icon,name:"Apply Easing",description:"Apply the easing function of the selected animation.",condition:()=>{if(!this.formats.has(Format.id))return!1;let t=this.getSelectedAnimation();return Animator.open&&t&&h(t)},click(t){typeof this.children=="function"&&t?.target instanceof HTMLElement&&new Menu(this.children()).open(t.target)},children:()=>{let t=this.getSelectedAnimation();if(!t)return[];let o=["None",...m],r=g(t)?.easing??"None";return o.map(a=>({name:a,icon:a===r?M.on:M.off,click:()=>{Undo.initEdit({animations:[t]}),a==="None"?t.anim_time_update="":E(t,a),Undo.finishEdit("Apply Easing")}}))}});this.actions.push(n)}actionApplyEasings(){let n=new Action("easings.apply_easings",{icon:this.icon,name:"Apply Easings",description:"Apply the easing functions of all animations in the current file.",condition:()=>this.formats.has(Format.id)&&Animator.open&&AnimationItem.all.some(h),click:()=>this.easingsDialog.show()});this.actions.push(n),MenuBar.addAction(n,"animation")}get easingsDialog(){let n=AnimationItem.all,t=n.reduce((e,s)=>(e[s.name.replaceAll(".","_tkn_")]=s,e),{}),o=["None",...m],r=Object.fromEntries(o.map((e,s)=>[s,e])),a=n.reduce((e,s)=>{if(!h(s))return e;let l=g(s),p=s.name.replaceAll(".","_tkn_"),d=1+(l?.index??-1);return e[p]={type:"select",label:s.name,options:r,value:d},e},{}),c=new Dialog({id:this.id,title:this.title,form:{...a,buttonBar:{type:"buttons",buttons:["Reset All"],click(){c.setFormValues(Object.keys(a).reduce((e,s)=>(e[s]=0,e),{}),!0)}}},onConfirm:e=>{Undo.initEdit({animations:n});for(let s of Object.keys(e)){let l=t[s];if(!l)continue;let p=+e[s],d=!1;p?(E(l,o[p]),d=!0):g(l)&&(l.anim_time_update="",d=!0),d&&(l.saved=!1)}Undo.finishEdit("Apply Easing")}});return c}},w=new b;BBPlugin.register(w.id,w);})();
