"use strict";(()=>{var l={name:"easings",private:!0,version:"1.0.0",module:"src/index.ts",type:"module",author:{name:"Svdex",url:"http://svdex.moe"},scripts:{watch:"esbuild src/index.ts --bundle --watch --minify --outfile=../../plugins/easings/easings.js --format=iife",build:"esbuild src/index.ts --bundle --minify --outfile=../../plugins/easings/easings.js --format=iife"},devDependencies:{esbuild:"^0.25.6",eslint:"^9.37.0",prettier:"^3.6.2","prettier-plugin-multiline-arrays":"^4.0.3","prettier-plugin-organize-imports":"^4.1.0","typescript-eslint":"^8.36.0"}};function $(i){let n=0;for(let t=0;t<i.length;t++)n=n*31+i.charCodeAt(t)|0;return n^3405695742}var f="abcdefghijklmnopqrstuvwxyz";function y(i){let n=$(i),t="",o=Math.abs(n);do t=f[o%f.length]+t,o=Math.floor(o/f.length);while(o>0);return"v.__e"+t}var b={inSine:"math.ease_in_sine(_t)",outSine:"math.ease_out_sine(_t)",inOutSine:"math.ease_in_out_sine(_t)",inQuad:"math.ease_in_quad(_t)",outQuad:"math.ease_out_quad(_t)",inOutQuad:"math.ease_in_out_quad(_t)",inCubic:"math.ease_in_cubic(_t)",outCubic:"math.ease_out_cubic(_t)",inOutCubic:"math.ease_in_out_cubic(_t)",inQuart:"math.ease_in_quart(_t)",outQuart:"math.ease_out_quart(_t)",inOutQuart:"math.ease_in_out_quart(_t)",inQuint:"math.ease_in_quint(_t)",outQuint:"math.ease_out_quint(_t)",inOutQuint:"math.ease_in_out_quint(_t)",inExpo:"math.ease_in_expo(_t)",outExpo:"math.ease_out_expo(_t)",inOutExpo:"math.ease_in_out_expo(_t)",inCirc:"math.ease_in_circ(_t)",outCirc:"math.ease_out_circ(_t)",inOutCirc:"math.ease_in_out_circ(_t)",inBounce:"math.ease_in_bounce(_t)",outBounce:"math.ease_out_bounce(_t)",inOutBounce:"math.ease_in_out_bounce(_t)"},m=Object.keys(b);function O(i){let{easing:n,duration:t,animationName:o,loop:c=!1}=i,a=y(o),r=y(o+"_orig"),s=b[n].replace(/_t/g,`0,${t},${a}`).replace(/\s+/g,""),e;return c==="loop"?e=`${r}=(${r}??0)+q.delta_time;${r}>${t}?{${r}=${r}-${t};};`:e=`(${r}??0)>${t}?{return${t+.1};}:{${r}=(${r}??0)+q.delta_time;};`,`q.anim_time==0?{${r}=0;};${e}${a}=${r}/${t};return${s};`}var _=`'${l.name}=${l.version}';`;function A(i,n){let t=i.name,o=m.indexOf(n),c=_+`'i=${o}';`+O({animationName:t,duration:i.length,easing:n,loop:i.loop});i.anim_time_update=c}function g(i){let n=i.anim_time_update;if(!n.startsWith(_))return;let o=n.slice(_.length).match(/'i=(\d+)'/)?.[1];if(!o)return;let c=+o,a=m[c];if(a)return{easing:a,index:c}}function h(i){let n=i.anim_time_update;return n.startsWith(_)||!n&&i.length>0}var x={on:"far.fa-dot-circle",off:"far.fa-circle"},E=class{id=l.name;title="Easings";author=l.author.name;version=l.version;description="Apply easing functions to Minecraft: Bedrock Edition animations.";icon="stacked_line_chart";variant="both";tags=["Minecraft: Bedrock Edition","Animation"];website=l.author.url;min_version="4.8.0";actions=[];formats=new Set(["bedrock","bedrock_old"]);constructor(){this.onload=this.onload.bind(this),this.onunload=this.onunload.bind(this)}onload(){this.actionApplyEasing(),this.actionApplyEasings()}onunload(){for(let n of this.actions)n.delete();this.actions=[]}getSelectedAnimation(){if(Animator.open&&Blockbench.Animation&&Animation.selected!==null)return Animation.selected}actionApplyEasing(){let n=new Action("easings.apply_easing",{icon:this.icon,name:"Apply Easing",description:"Apply the easing function of the selected animation.",condition:()=>{if(!this.formats.has(Format.id))return!1;let t=this.getSelectedAnimation();return Animator.open&&t&&h(t)},click(t){typeof this.children=="function"&&t?.target instanceof HTMLElement&&new Menu(this.children()).open(t.target)},children:()=>{let t=this.getSelectedAnimation();if(!t)return[];let o=["None",...m],c=g(t)?.easing??"None";return o.map(a=>({name:a,icon:a===c?x.on:x.off,click:()=>{Undo.initEdit({animations:[t]}),a==="None"?t.anim_time_update="":A(t,a),Undo.finishEdit("Apply Easing")}}))}});this.actions.push(n)}actionApplyEasings(){let n=new Action("easings.apply_easings",{icon:this.icon,name:"Apply Easings",description:"Apply the easing functions of all animations in the current file.",condition:()=>this.formats.has(Format.id)&&Animator.open&&AnimationItem.all.some(h),click:()=>this.easingsDialog.show()});this.actions.push(n),MenuBar.addAction(n,"animation")}get easingsDialog(){let n=AnimationItem.all,t=n.reduce((s,e)=>(s[e.name.replaceAll(".","_tkn_")]=e,s),{}),o=["None",...m],c=Object.fromEntries(o.map((s,e)=>[e,s])),a=n.reduce((s,e)=>{if(!h(e))return s;let u=g(e),p=e.name.replaceAll(".","_tkn_"),d=1+(u?.index??-1);return s[p]={type:"select",label:e.name,options:c,value:d},s},{}),r=new Dialog({id:this.id,title:this.title,form:{...a,buttonBar:{type:"buttons",buttons:["Reset All"],click(){r.setFormValues(Object.keys(a).reduce((s,e)=>(s[e]=0,s),{}),!0)}}},onConfirm:s=>{Undo.initEdit({animations:n});for(let e of Object.keys(s)){let u=t[e];if(!u)continue;let p=+s[e],d=!1;p?(A(u,o[p]),d=!0):g(u)&&(u.anim_time_update="",d=!0),d&&(u.saved=!1)}Undo.finishEdit("Apply Easing")}});return r}},B=new E;BBPlugin.register(B.id,B);})();
